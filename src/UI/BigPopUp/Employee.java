package UI.BigPopUp;


import Database.DBConnectionProvider;
import Others.Functions;
import UI.BigPopUp.ProductsTable;
import UI.BigPopUp.ViewStock;
import UI.Buy;
import UI.Expenses;
import UI.LoginPage;
import UI.PopUp.DeleteProducts;
import UI.PopUp.DeleteEmployee;
import UI.PopUp.EditExpense;
import UI.PopUp.NoConnection;
import UI.PopUp.Save;
import UI.PopUp.Updated;
import UI.ReturnProducts;
import UI.Sell;
import UI.Settings;
import UI.Stock;
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.ArrayList;
import java.util.logging.Level;
import java.util.logging.Logger;
import java.awt.*;
import java.awt.event.WindowEvent;
import static java.lang.Thread.sleep;
import java.text.SimpleDateFormat;
import java.util.*;
import javax.annotation.Resources.*;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import java.lang.Math;
import static jdk.nashorn.internal.objects.NativeString.trim;
import rakibs.traders.RakibsTraders;

/**
 *
 * @author RH Rafi
 */
public class Employee extends javax.swing.JFrame {

    /**
     * Creates new form Products
     */
    public Employee() {
        initComponents();
        //initComboCompanyName();
        initComboEmployeeID();
        setIcon();
        //setTime();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        lblHome = new javax.swing.JLabel();
        lblEmployeeID = new javax.swing.JLabel();
        txtFieldEmployeeIDValue = new javax.swing.JTextField();
        btnRefrash = new javax.swing.JButton();
        lblPageTitle = new javax.swing.JLabel();
        lbEmployeeName = new javax.swing.JLabel();
        lblPhone = new javax.swing.JLabel();
        lblAddress = new javax.swing.JLabel();
        lblSalary = new javax.swing.JLabel();
        lblOffDaysPerMonth = new javax.swing.JLabel();
        lblNotes = new javax.swing.JLabel();
        jScrollPane1 = new javax.swing.JScrollPane();
        txtAreaNotes = new javax.swing.JTextArea();
        btnDelete = new javax.swing.JButton();
        btnUpdate = new javax.swing.JButton();
        btnSave = new javax.swing.JButton();
        jButtonSubmit = new javax.swing.JButton();
        lblStartingDate = new javax.swing.JLabel();
        txtFieldStartingDateValue = new javax.swing.JTextField();
        txtFieldWorkdaysValue = new javax.swing.JTextField();
        txtFieldPhoneValue = new javax.swing.JTextField();
        txtFieldAddressValue = new javax.swing.JTextField();
        txtFieldSalaryValue = new javax.swing.JTextField();
        jLabel1 = new javax.swing.JLabel();
        jLabelNumberOfDaysWorked = new javax.swing.JLabel();
        jLabelMonthsWorked = new javax.swing.JLabel();
        jLabel4 = new javax.swing.JLabel();
        txtFieldEmployeeName = new javax.swing.JTextField();
        txtFieldPhoneValue1 = new javax.swing.JTextField();
        jButton1 = new javax.swing.JButton();
        Background = new javax.swing.JLabel();

        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
        setResizable(false);
        getContentPane().setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        lblHome.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Resources/Icons/Logo.png"))); // NOI18N
        lblHome.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        lblHome.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                lblHomeMouseClicked(evt);
            }
        });
        getContentPane().add(lblHome, new org.netbeans.lib.awtextra.AbsoluteConstraints(30, 20, 130, 40));

        lblEmployeeID.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        lblEmployeeID.setForeground(new java.awt.Color(255, 255, 255));
        lblEmployeeID.setText("Employee ID: ");
        getContentPane().add(lblEmployeeID, new org.netbeans.lib.awtextra.AbsoluteConstraints(250, 150, 110, 20));

        txtFieldEmployeeIDValue.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtFieldEmployeeIDValueActionPerformed(evt);
            }
        });
        getContentPane().add(txtFieldEmployeeIDValue, new org.netbeans.lib.awtextra.AbsoluteConstraints(350, 150, 170, 20));

        btnRefrash.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Resources/Icons/Refresh.png"))); // NOI18N
        btnRefrash.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnRefrashActionPerformed(evt);
            }
        });
        getContentPane().add(btnRefrash, new org.netbeans.lib.awtextra.AbsoluteConstraints(780, 180, 219, 33));

        lblPageTitle.setFont(new java.awt.Font("Tahoma", 0, 24)); // NOI18N
        lblPageTitle.setForeground(new java.awt.Color(67, 196, 114));
        lblPageTitle.setText("Edit Employee");
        getContentPane().add(lblPageTitle, new org.netbeans.lib.awtextra.AbsoluteConstraints(70, 90, 230, 43));

        lbEmployeeName.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        lbEmployeeName.setForeground(new java.awt.Color(255, 255, 255));
        lbEmployeeName.setText("Employee Name :");
        getContentPane().add(lbEmployeeName, new org.netbeans.lib.awtextra.AbsoluteConstraints(70, 180, 130, 23));

        lblPhone.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        lblPhone.setForeground(new java.awt.Color(255, 255, 255));
        lblPhone.setText("Phone :");
        getContentPane().add(lblPhone, new org.netbeans.lib.awtextra.AbsoluteConstraints(70, 250, 103, 23));

        lblAddress.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        lblAddress.setForeground(new java.awt.Color(255, 255, 255));
        lblAddress.setText("Address :");
        getContentPane().add(lblAddress, new org.netbeans.lib.awtextra.AbsoluteConstraints(70, 290, 103, 23));

        lblSalary.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        lblSalary.setForeground(new java.awt.Color(255, 255, 255));
        lblSalary.setText("Salary");
        getContentPane().add(lblSalary, new org.netbeans.lib.awtextra.AbsoluteConstraints(70, 330, 130, 23));

        lblOffDaysPerMonth.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        lblOffDaysPerMonth.setForeground(new java.awt.Color(255, 255, 255));
        lblOffDaysPerMonth.setText("Offdays per Month");
        getContentPane().add(lblOffDaysPerMonth, new org.netbeans.lib.awtextra.AbsoluteConstraints(70, 370, 130, 23));

        lblNotes.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        lblNotes.setForeground(new java.awt.Color(255, 255, 255));
        lblNotes.setText("Notes :");
        getContentPane().add(lblNotes, new org.netbeans.lib.awtextra.AbsoluteConstraints(70, 410, 103, 23));

        txtAreaNotes.setColumns(20);
        txtAreaNotes.setRows(5);
        jScrollPane1.setViewportView(txtAreaNotes);

        getContentPane().add(jScrollPane1, new org.netbeans.lib.awtextra.AbsoluteConstraints(220, 410, 380, 72));

        btnDelete.setBackground(new java.awt.Color(0, 0, 0));
        btnDelete.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Resources/Icons/Delete.png"))); // NOI18N
        btnDelete.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnDeleteActionPerformed(evt);
            }
        });
        getContentPane().add(btnDelete, new org.netbeans.lib.awtextra.AbsoluteConstraints(370, 510, 70, 20));

        btnUpdate.setBackground(new java.awt.Color(11, 66, 169));
        btnUpdate.setFont(new java.awt.Font("Tahoma", 0, 8)); // NOI18N
        btnUpdate.setForeground(new java.awt.Color(255, 255, 255));
        btnUpdate.setText("UDPATE");
        btnUpdate.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnUpdateActionPerformed(evt);
            }
        });
        getContentPane().add(btnUpdate, new org.netbeans.lib.awtextra.AbsoluteConstraints(450, 510, 70, 20));

        btnSave.setBackground(new java.awt.Color(0, 0, 0));
        btnSave.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Resources/Icons/save.png"))); // NOI18N
        btnSave.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnSaveActionPerformed(evt);
            }
        });
        getContentPane().add(btnSave, new org.netbeans.lib.awtextra.AbsoluteConstraints(530, 510, 70, 20));

        jButtonSubmit.setBackground(new java.awt.Color(67, 196, 114));
        jButtonSubmit.setFont(new java.awt.Font("Titillium", 1, 13)); // NOI18N
        jButtonSubmit.setForeground(new java.awt.Color(255, 255, 255));
        jButtonSubmit.setText("VIEW EMPLOYEE LIST");
        jButtonSubmit.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButtonSubmitActionPerformed(evt);
            }
        });
        getContentPane().add(jButtonSubmit, new org.netbeans.lib.awtextra.AbsoluteConstraints(780, 140, 220, 30));

        lblStartingDate.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        lblStartingDate.setForeground(new java.awt.Color(255, 255, 255));
        lblStartingDate.setText("Starting date :");
        getContentPane().add(lblStartingDate, new org.netbeans.lib.awtextra.AbsoluteConstraints(70, 210, 103, 23));
        getContentPane().add(txtFieldStartingDateValue, new org.netbeans.lib.awtextra.AbsoluteConstraints(220, 210, 380, 30));

        txtFieldWorkdaysValue.setForeground(new java.awt.Color(204, 204, 204));
        txtFieldWorkdaysValue.setText("Vacation in every month");
        txtFieldWorkdaysValue.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                txtFieldWorkdaysValueFocusGained(evt);
            }
            public void focusLost(java.awt.event.FocusEvent evt) {
                txtFieldWorkdaysValueFocusLost(evt);
            }
        });
        txtFieldWorkdaysValue.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtFieldWorkdaysValueActionPerformed(evt);
            }
        });
        getContentPane().add(txtFieldWorkdaysValue, new org.netbeans.lib.awtextra.AbsoluteConstraints(220, 370, 380, 30));

        txtFieldPhoneValue.setForeground(new java.awt.Color(204, 204, 204));
        txtFieldPhoneValue.setText("Phone 2");
        txtFieldPhoneValue.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                txtFieldPhoneValueFocusGained(evt);
            }
            public void focusLost(java.awt.event.FocusEvent evt) {
                txtFieldPhoneValueFocusLost(evt);
            }
        });
        txtFieldPhoneValue.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtFieldPhoneValueActionPerformed(evt);
            }
        });
        getContentPane().add(txtFieldPhoneValue, new org.netbeans.lib.awtextra.AbsoluteConstraints(420, 250, 180, 30));

        txtFieldAddressValue.setForeground(new java.awt.Color(204, 204, 204));
        txtFieldAddressValue.setText("Enter the Address");
        txtFieldAddressValue.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                txtFieldAddressValueFocusGained(evt);
            }
            public void focusLost(java.awt.event.FocusEvent evt) {
                txtFieldAddressValueFocusLost(evt);
            }
        });
        txtFieldAddressValue.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtFieldAddressValueActionPerformed(evt);
            }
        });
        getContentPane().add(txtFieldAddressValue, new org.netbeans.lib.awtextra.AbsoluteConstraints(220, 290, 380, 30));

        txtFieldSalaryValue.setForeground(new java.awt.Color(204, 204, 204));
        txtFieldSalaryValue.setText("Enter the Salary");
        txtFieldSalaryValue.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                txtFieldSalaryValueFocusGained(evt);
            }
            public void focusLost(java.awt.event.FocusEvent evt) {
                txtFieldSalaryValueFocusLost(evt);
            }
        });
        txtFieldSalaryValue.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtFieldSalaryValueActionPerformed(evt);
            }
        });
        getContentPane().add(txtFieldSalaryValue, new org.netbeans.lib.awtextra.AbsoluteConstraints(220, 330, 380, 30));

        jLabel1.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jLabel1.setForeground(new java.awt.Color(255, 255, 255));
        jLabel1.setText("NUMBER OF DAYS WORKED:");
        getContentPane().add(jLabel1, new org.netbeans.lib.awtextra.AbsoluteConstraints(780, 290, 190, 20));

        jLabelNumberOfDaysWorked.setFont(new java.awt.Font("Tahoma", 0, 30)); // NOI18N
        jLabelNumberOfDaysWorked.setForeground(new java.awt.Color(255, 255, 255));
        jLabelNumberOfDaysWorked.setText("00");
        getContentPane().add(jLabelNumberOfDaysWorked, new org.netbeans.lib.awtextra.AbsoluteConstraints(980, 280, -1, -1));

        jLabelMonthsWorked.setFont(new java.awt.Font("Tahoma", 0, 30)); // NOI18N
        jLabelMonthsWorked.setForeground(new java.awt.Color(255, 255, 255));
        jLabelMonthsWorked.setText("00");
        getContentPane().add(jLabelMonthsWorked, new org.netbeans.lib.awtextra.AbsoluteConstraints(910, 310, -1, -1));

        jLabel4.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jLabel4.setForeground(new java.awt.Color(255, 255, 255));
        jLabel4.setText("Months WORKED:");
        getContentPane().add(jLabel4, new org.netbeans.lib.awtextra.AbsoluteConstraints(780, 320, 200, 20));

        txtFieldEmployeeName.setForeground(new java.awt.Color(204, 204, 204));
        txtFieldEmployeeName.setText("Employee Name");
        txtFieldEmployeeName.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                txtFieldEmployeeNameFocusGained(evt);
            }
            public void focusLost(java.awt.event.FocusEvent evt) {
                txtFieldEmployeeNameFocusLost(evt);
            }
        });
        txtFieldEmployeeName.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtFieldEmployeeNameActionPerformed(evt);
            }
        });
        getContentPane().add(txtFieldEmployeeName, new org.netbeans.lib.awtextra.AbsoluteConstraints(220, 180, 380, 23));

        txtFieldPhoneValue1.setForeground(new java.awt.Color(204, 204, 204));
        txtFieldPhoneValue1.setText("Phone 1");
        txtFieldPhoneValue1.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                txtFieldPhoneValue1FocusGained(evt);
            }
            public void focusLost(java.awt.event.FocusEvent evt) {
                txtFieldPhoneValue1FocusLost(evt);
            }
        });
        txtFieldPhoneValue1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtFieldPhoneValue1ActionPerformed(evt);
            }
        });
        getContentPane().add(txtFieldPhoneValue1, new org.netbeans.lib.awtextra.AbsoluteConstraints(220, 250, 190, 30));

        jButton1.setBackground(new java.awt.Color(0, 0, 153));
        jButton1.setForeground(new java.awt.Color(255, 255, 255));
        jButton1.setText("GO");
        jButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton1ActionPerformed(evt);
            }
        });
        getContentPane().add(jButton1, new org.netbeans.lib.awtextra.AbsoluteConstraints(530, 147, 70, -1));

        Background.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Resources/Icons/background.png"))); // NOI18N
        getContentPane().add(Background, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 0, 1280, 669));

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void btnSaveActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnSaveActionPerformed
        // TODO add your handling code here:
        
        Connection con = DBConnectionProvider.getDBConnection();
        String query = "INSERT INTO `employee` (`emp_ID`, `employee_name`, `phone1`, `phone2`, `StartingDate`, `Salary`, `offdays_per_month`, `address`, `notes`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)";
        
        
        try{
            PreparedStatement pstmt = con.prepareStatement(query);
            String employee_name = this.txtFieldEmployeeName.getText();
            String phone1 = this.txtFieldPhoneValue1.getText();
            String phone2 = this.txtFieldPhoneValue.getText();
            String StartingDate = this.txtFieldStartingDateValue.getText();
            
            Double Salary = Double.parseDouble(this.txtFieldSalaryValue.getText());
            String address = this.txtFieldAddressValue.getText();
            String notes = this.txtAreaNotes.getText();
            String emp_ID = this.txtFieldEmployeeIDValue.getText();
            Integer offdays_per_month = Integer.parseInt(this.txtFieldWorkdaysValue.getText());
            
            pstmt.setString(1, emp_ID);
            pstmt.setString(2, employee_name);
            pstmt.setString(3, phone1);
            pstmt.setString(4, phone2);
            String[] splitDate = StartingDate.split("/");
            StartingDate = trim(splitDate[2]) + "-" + trim(splitDate[1]) + "-" + trim(splitDate[0].substring(splitDate[0].indexOf("M")+1)) + " "+ trim(splitDate[0].substring(0, splitDate[0].indexOf("M")+1))  ;
          //  System.err.println(StartingDate);
            pstmt.setString(5, StartingDate);
            pstmt.setDouble(6, Salary);
            pstmt.setInt(7, offdays_per_month);
            pstmt.setString(8, address);
            pstmt.setString(9, notes);
            
            if(emp_ID.equals("0"))
                throw new Exception("product id null");
            else{
                pstmt.executeUpdate();
                Save sv = new Save();
                RakibsTraders.popUp(sv);
                clearField();
            }
            caller.setEnabled(true);
            this.dispose();
        } catch(Exception ex){
            System.out.println("Failed to get DBConn:: "+ex.getMessage());
            NoConnection no = new NoConnection();
            RakibsTraders.popUp(no);
        }
    }//GEN-LAST:event_btnSaveActionPerformed
    private boolean checkField(){
        if( this.txtFieldEmployeeName.getText().equals("") || this.txtFieldPhoneValue1.getText().equals("") ){
//            System.err.println(this.txtFieldAmountValue.getText() + " EROR ");
            return true;
        }
        else return false;
    }
    private void btnUpdateActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnUpdateActionPerformed
        // TODO add your handling code here:
        if( !checkField() ){
            Connection con = DBConnectionProvider.getDBConnection();
            String query = "UPDATE employee SET employee_name = ?,phone1 = ?,phone2 = ?,offdays_per_month = ?,StartingDate = ?, Salary=?,address=?,notes=? WHERE emp_ID = ? ";
            try{
                PreparedStatement pstmt = con.prepareStatement(query);
                String employee_name = this.txtFieldEmployeeName.getText();
                String phone1 = this.txtFieldPhoneValue1.getText();
                String phone2 = this.txtFieldPhoneValue.getText();
                String StartingDate = this.txtFieldStartingDateValue.getText();
                Double Salary = Double.parseDouble(this.txtFieldSalaryValue.getText());
                String address = this.txtFieldAddressValue.getText();
                String notes = this.txtAreaNotes.getText();
                String emp_ID = this.txtFieldEmployeeIDValue.getText();
                Integer offdays_per_month = Integer.parseInt(this.txtFieldWorkdaysValue.getText());

                pstmt.setString(1,employee_name);
                pstmt.setString(2,phone1);
                pstmt.setString(3,phone2);
                pstmt.setInt(4,offdays_per_month);
                //String[] splitDate = StartingDate.split("/");
                //StartingDate = trim(splitDate[2]) + "-" + trim(splitDate[1]) + "-" + trim(splitDate[0].substring(splitDate[0].indexOf("M")+1)) + " "+ trim(splitDate[0].substring(0, splitDate[0].indexOf("M")+1))  ;
                pstmt.setString(5, StartingDate);
                pstmt.setDouble(6,Salary);
                pstmt.setString(7,address);
                pstmt.setString(8,notes);
                pstmt.setString(9,emp_ID);
                pstmt.executeUpdate();
                clearField();
                Updated up = new Updated();
                RakibsTraders.popUp(up);
                caller.setEnabled(true);
                this.dispose();
                
            }catch(Exception ex){
                System.out.println("Failed to get DBConn:: "+ex.getMessage());
                NoConnection no = new NoConnection();
                RakibsTraders.popUp(no);
            }
            
        
        }
    }//GEN-LAST:event_btnUpdateActionPerformed

    private void btnDeleteActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnDeleteActionPerformed
        // TODO add your handling code here:
        DeleteEmployee dlt = new DeleteEmployee();
        RakibsTraders.popUp(dlt);
        dlt.setValue(txtFieldEmployeeIDValue.getText(), txtFieldEmployeeName.getText());
        clearField();
        caller.setEnabled(true);
        this.dispose();
    }//GEN-LAST:event_btnDeleteActionPerformed

    private void txtFieldEmployeeIDValueActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtFieldEmployeeIDValueActionPerformed
        // TODO add your handling code here:
       
    }//GEN-LAST:event_txtFieldEmployeeIDValueActionPerformed

    private void btnRefrashActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnRefrashActionPerformed
        // TODO add your handling code here:
        txtFieldEmployeeIDValue.setText("");
        txtFieldStartingDateValue.setText("");
        txtFieldEmployeeName.setText("Employee Name");
        txtFieldEmployeeName.setForeground(new Color(204,204,204));
        txtFieldPhoneValue1.setText("Phone 1");
        txtFieldPhoneValue1.setForeground(new Color(204,204,204));
        txtFieldPhoneValue.setText("Phone 2");
        txtFieldPhoneValue.setForeground(new Color(204,204,204));
        txtFieldAddressValue.setText("Enter the Address");
        txtFieldAddressValue.setForeground(new Color(204,204,204));
        txtFieldSalaryValue.setText("Enter the Salary");
        txtFieldSalaryValue.setForeground(new Color(204,204,204));
        txtFieldWorkdaysValue.setText("Vacation in every month");
        txtFieldWorkdaysValue.setForeground(new Color(204,204,204));
        jLabelNumberOfDaysWorked.setText("00");
        jLabelMonthsWorked.setText("00");
        
        
        clearField();
    }//GEN-LAST:event_btnRefrashActionPerformed

    private void jButtonSubmitActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButtonSubmitActionPerformed
        // TODO add your handling code here:
        EmployeeList page = new EmployeeList();
        page.setCaller(this);
        RakibsTraders.bigPopUp(page);
        this.setEnabled(false);
    }//GEN-LAST:event_jButtonSubmitActionPerformed

    private void txtFieldWorkdaysValueFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtFieldWorkdaysValueFocusGained
        // TODO add your handling code here:
        if( txtFieldWorkdaysValue.getText().equals("Vacation in every month")) {
            this.txtFieldWorkdaysValue.setText("");
        }
        this.txtFieldWorkdaysValue.setForeground(Color.black);
        
    }//GEN-LAST:event_txtFieldWorkdaysValueFocusGained

    private void txtFieldWorkdaysValueFocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtFieldWorkdaysValueFocusLost
        // TODO add your handling code here:
        if(txtFieldWorkdaysValue.getText().isEmpty()){
            this.txtFieldWorkdaysValue.setText("Vacation in every month");
            this.txtFieldWorkdaysValue.setForeground(new Color(204,204,204));
        }
    }//GEN-LAST:event_txtFieldWorkdaysValueFocusLost

    private void txtFieldWorkdaysValueActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtFieldWorkdaysValueActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtFieldWorkdaysValueActionPerformed

    private void txtFieldPhoneValueFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtFieldPhoneValueFocusGained
        // TODO add your handling code here:
        if( txtFieldPhoneValue.getText().equals("Phone 2")){
            this.txtFieldPhoneValue.setText("");
        }
        this.txtFieldPhoneValue.setForeground(Color.BLACK);
        
        
    }//GEN-LAST:event_txtFieldPhoneValueFocusGained

    private void txtFieldPhoneValueFocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtFieldPhoneValueFocusLost
        // TODO add your handling code here:
        if(txtFieldPhoneValue.getText().isEmpty()){
            txtFieldPhoneValue.setText("Phone 2");
            txtFieldPhoneValue.setForeground(new Color(204,204,204));
        }
    }//GEN-LAST:event_txtFieldPhoneValueFocusLost

    private void txtFieldPhoneValueActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtFieldPhoneValueActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtFieldPhoneValueActionPerformed

    private void txtFieldAddressValueFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtFieldAddressValueFocusGained
        // TODO add your handling code here:
        if( txtFieldAddressValue.getText().equals("Enter the Address") ){
            txtFieldAddressValue.setText("");
        }
        this.txtFieldAddressValue.setForeground(Color.black);
        
    }//GEN-LAST:event_txtFieldAddressValueFocusGained

    private void txtFieldAddressValueFocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtFieldAddressValueFocusLost
        // TODO add your handling code here:
        if( txtFieldAddressValue.getText().isEmpty()){
            txtFieldAddressValue.setText("Enter the Address");
            txtFieldAddressValue.setForeground(new Color(204,204,204));
        }
    }//GEN-LAST:event_txtFieldAddressValueFocusLost

    private void txtFieldAddressValueActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtFieldAddressValueActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtFieldAddressValueActionPerformed

    private void txtFieldSalaryValueFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtFieldSalaryValueFocusGained
        // TODO add your handling code here:
        if(this.txtFieldSalaryValue.getText().equals("Enter the Salary")){
            this.txtFieldSalaryValue.setText("");
        }
        this.txtFieldSalaryValue.setForeground(Color.black);
    }//GEN-LAST:event_txtFieldSalaryValueFocusGained

    private void txtFieldSalaryValueFocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtFieldSalaryValueFocusLost
        // TODO add your handling code here:
        if( txtFieldSalaryValue.getText().isEmpty() ){
            this.txtFieldSalaryValue.setText("Enter the Salary");
            this.txtFieldSalaryValue.setForeground(new Color(204,204,204));
        }
    }//GEN-LAST:event_txtFieldSalaryValueFocusLost

    private void txtFieldSalaryValueActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtFieldSalaryValueActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtFieldSalaryValueActionPerformed

    private void lblHomeMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_lblHomeMouseClicked
        // TODO add your handling code here:
    }//GEN-LAST:event_lblHomeMouseClicked

    private void txtFieldEmployeeNameFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtFieldEmployeeNameFocusGained
        // TODO add your handling code here:
        if( txtFieldEmployeeName.getText().equals("Employee Name")){
            this.txtFieldEmployeeName.setText("");
        }
        this.txtFieldEmployeeName.setForeground(Color.BLACK);
        
        if( this.txtFieldEmployeeIDValue.getText().equals("") ){
                SimpleDateFormat dFormat = new SimpleDateFormat("dd/MM/yyyy");
                Date d = new Date();
                String date = dFormat.format(d);

                if(txtFieldStartingDateValue.getText().equals("")){
                    Calendar cal = new GregorianCalendar();
                    Integer sec = cal.get(Calendar.SECOND);
                    Integer hour = cal.get(Calendar.HOUR);
                    if(hour==0)
                        hour=12;
                    Integer min = cal.get(Calendar.MINUTE);
                    Integer am_pm = cal.get(Calendar.AM_PM);
                    if(am_pm == 0){
                        String timeAndDate = hour + ":" + min + ":" + sec + " " + "AM" + " " + date;
                        txtFieldStartingDateValue.setText(timeAndDate);
                    }else {
                        String timeAndDate = hour + ":" + min + ":" + sec + " " + "PM" + " " + date;
                        txtFieldStartingDateValue.setText(timeAndDate);
                    }
                }
                String id = Functions.empIDGenerator(date);
                txtFieldEmployeeIDValue.setText(id);
        }
    }//GEN-LAST:event_txtFieldEmployeeNameFocusGained

    private void txtFieldEmployeeNameFocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtFieldEmployeeNameFocusLost
        // TODO add your handling code here:
        if(txtFieldEmployeeName.getText().isEmpty()){
            txtFieldEmployeeName.setText("Employee Name");
            txtFieldEmployeeName.setForeground(new Color(204,204,204));
        }
    }//GEN-LAST:event_txtFieldEmployeeNameFocusLost

    private void txtFieldEmployeeNameActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtFieldEmployeeNameActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtFieldEmployeeNameActionPerformed

    private void txtFieldPhoneValue1FocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtFieldPhoneValue1FocusGained
        // TODO add your handling code here:
        if( txtFieldPhoneValue1.getText().equals("Phone 1")){
            this.txtFieldPhoneValue1.setText("");
        }
        this.txtFieldPhoneValue1.setForeground(Color.BLACK);
        
    }//GEN-LAST:event_txtFieldPhoneValue1FocusGained

    private void txtFieldPhoneValue1FocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtFieldPhoneValue1FocusLost
        // TODO add your handling code here:
        if( txtFieldPhoneValue1.getText().isEmpty()){
            this.txtFieldPhoneValue1.setText("Phone 1");
            this.txtFieldPhoneValue1.setForeground(new Color(204,204,204));
        }
    }//GEN-LAST:event_txtFieldPhoneValue1FocusLost

    private void txtFieldPhoneValue1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtFieldPhoneValue1ActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtFieldPhoneValue1ActionPerformed

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton1ActionPerformed
        // TODO add your handling code here:
        
        String searchID = txtFieldEmployeeIDValue.getText();
        
        if( !searchID.equals("") && searchID.startsWith("EMP#")){
                clearField();
                Connection con = DBConnectionProvider.getDBConnection();
                String query = "select * from employee where emp_ID = ?";
                String query2 = "SELECT count(`Emp_ID`) as dayworked FROM `emp_attendance` where `emp_attendance`.`Status` = 'Present' and `emp_attendance`.`Emp_ID` = ?";
                try {
                    PreparedStatement pstmt = con.prepareStatement(query);
                    PreparedStatement pstmt2 = con.prepareStatement(query2);
                    PreparedStatement pstmt3 = con.prepareStatement(query);
                    pstmt.setString(1, searchID);
                    ResultSet rs = pstmt.executeQuery();
                    

                    while( rs.next() ){
//                        System.err.println(searchID);
                        this.txtFieldEmployeeIDValue.setText(searchID);
                        this.txtFieldEmployeeName.setText(rs.getString("employee_name"));
                        this.txtFieldStartingDateValue.setText(rs.getString("StartingDate"));
                        this.txtFieldPhoneValue1.setText(rs.getString("phone1"));
                        this.txtFieldPhoneValue.setText(rs.getString("phone2"));
                        this.txtFieldAddressValue.setText(rs.getString("address"));
                        this.txtFieldSalaryValue.setText(String.format("%.4f",rs.getDouble("Salary")));
                        this.txtFieldWorkdaysValue.setText(Integer.toString(rs.getInt("offdays_per_month")));
                        this.txtAreaNotes.setText(rs.getString("notes"));
                    }
                    makeBlackText();
                    pstmt2.setString(1, searchID);
                    ResultSet rs2 = pstmt2.executeQuery();
                    while(rs2.next()){
                        Integer days = rs2.getInt("dayworked");
                        this.jLabelNumberOfDaysWorked.setText(""+days);
                        Double months = days/30.0;
                        this.jLabelMonthsWorked.setText(String.format("%.2f", months));
                    }
                        

                } catch (SQLException ex) {
                    Logger.getLogger(Employee.class.getName()).log(Level.SEVERE, null, ex);
                }
            }
            else clearField();
        
    }//GEN-LAST:event_jButton1ActionPerformed

    
    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(Employee.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(Employee.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(Employee.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(Employee.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>
        //</editor-fold>
        //</editor-fold>
        //</editor-fold>
        //</editor-fold>
        //</editor-fold>
        //</editor-fold>
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new Employee().setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JLabel Background;
    private javax.swing.JButton btnDelete;
    private javax.swing.JButton btnRefrash;
    private javax.swing.JButton btnSave;
    private javax.swing.JButton btnUpdate;
    private javax.swing.JButton jButton1;
    private javax.swing.JButton jButtonSubmit;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabelMonthsWorked;
    private javax.swing.JLabel jLabelNumberOfDaysWorked;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JLabel lbEmployeeName;
    private javax.swing.JLabel lblAddress;
    private javax.swing.JLabel lblEmployeeID;
    private javax.swing.JLabel lblHome;
    private javax.swing.JLabel lblNotes;
    private javax.swing.JLabel lblOffDaysPerMonth;
    private javax.swing.JLabel lblPageTitle;
    private javax.swing.JLabel lblPhone;
    private javax.swing.JLabel lblSalary;
    private javax.swing.JLabel lblStartingDate;
    private javax.swing.JTextArea txtAreaNotes;
    private javax.swing.JTextField txtFieldAddressValue;
    private javax.swing.JTextField txtFieldEmployeeIDValue;
    private javax.swing.JTextField txtFieldEmployeeName;
    private javax.swing.JTextField txtFieldPhoneValue;
    private javax.swing.JTextField txtFieldPhoneValue1;
    private javax.swing.JTextField txtFieldSalaryValue;
    private javax.swing.JTextField txtFieldStartingDateValue;
    private javax.swing.JTextField txtFieldWorkdaysValue;
    // End of variables declaration//GEN-END:variables

    //custome variables declaration
    private ArrayList<String> employeeID = new ArrayList<>();
    private static Employee ref;
    private Integer flagTime = 0;
    private JFrame caller;
    //end of custom variables
    
    private void clearField() {
         this.txtFieldEmployeeIDValue.setText("");
         this.txtFieldEmployeeName.setText("");
         this.txtFieldStartingDateValue.setText("");
         this.txtFieldPhoneValue1.setText("");
         this.txtFieldPhoneValue.setText("");
         this.txtFieldAddressValue.setText("");
         this.txtFieldSalaryValue.setText("");
         this.txtFieldWorkdaysValue.setText("");
         this.txtAreaNotes.setText("");
//         initComboProductID();
    }
    
     private void makeBlackText() {
         this.txtFieldEmployeeIDValue.setForeground(Color.BLACK);
         this.txtFieldEmployeeName.setForeground(Color.BLACK);
         this.txtFieldStartingDateValue.setForeground(Color.BLACK);
         this.txtFieldPhoneValue1.setForeground(Color.BLACK);
         this.txtFieldPhoneValue.setForeground(Color.BLACK);
         this.txtFieldAddressValue.setForeground(Color.BLACK);
         this.txtFieldSalaryValue.setForeground(Color.BLACK);
         this.txtFieldWorkdaysValue.setForeground(Color.BLACK);
         this.txtAreaNotes.setForeground(Color.BLACK);
//         initComboProductID();
    }
    
    private void setIcon(){
        this.setIconImage(new ImageIcon(getClass().getResource("/Resources/Icons/Icon.png")).getImage());
    }
    
    public void setFlagTime(){
        if(flagTime==0)
            flagTime=1;
        else
            flagTime=0;
    }

    private void initComboEmployeeID(){
        employeeID = Functions.employeeID();
        Functions.setupAutoComplete(txtFieldEmployeeIDValue, employeeID); 
    }
    
    public void setCaller(JFrame frame){
        this.caller = frame;
    }
    
    @Override
    public void processWindowEvent(WindowEvent e) {
        if (e.getID() == WindowEvent.WINDOW_CLOSING) {
                caller.setEnabled(true);
                dispose();
        }
    }
}
